---
interface Props {
    command: string;
    origin: string;
    displayContent: string;
}

const { command, origin, displayContent } = Astro.props;
---

<p class="terminal">me@philippemalo.dev:~$ <span class="code"></span><span class="cursor">&#x2588;</span></p>

<script define:vars={{command, origin, displayContent}}>
    function typewriter(command) {
        const outputElement = document.querySelector('.code');
        outputElement.innerText = "";
        outputElement.classList.add('paused');
        
        let index = 0;
        const typingInterval = setInterval(() => {
            if (index < command.length) {
                outputElement.innerText += command.charAt(index);
                index++;
            } else if(index >= command.length){
                clearInterval(typingInterval);
                outputElement.classList.remove('paused');
                document.querySelector(origin).style.display = displayContent
            }
        }, Math.random() * (40 - 30) + 10);
    }
    typewriter(command);
</script>