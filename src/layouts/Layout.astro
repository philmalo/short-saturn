---
import '../styles/style.css';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SEO } from 'astro-seo';
import { getLangFromUrl } from '../i18n/utils';

interface Props {
	title: string;
	description: string;
}

const { title, description } = Astro.props as Props;
const currentYear = new Date().getFullYear();
const lang = getLangFromUrl(Astro.url);
---

<!doctype html>
<html lang={lang}>
	<head>
		<SEO
		charset="UTF-8"
		title={title}
		description={description}
		extend={{
			meta: [
				{name:"viewport", content:"width=device-width"},
				{name:"author", content:"Philippe Malo"},
				{name:"generator", content:Astro.generator}
			],
			link: [
				{rel:"icon", href:"/terminal_icon.svg"}
			],
		}}
		/>
	</head>
	<body class="crt">
		<Header/>
		<slot/>
		<Footer year={currentYear}/>
	</body>
</html>

<script>
	import blink from "../assets/blink.js";
	import textShadowsCrt from "../assets/textShadows.js";
	import flicker from "../assets/flickerCrt.js";
	import displayResults from "../assets/displayResults.js";

	const cover = document.querySelector(".cover");
	const duration = cover.dataset.duration;
	const delay = cover.dataset.delay

	blink();
	textShadowsCrt();
	flicker();
    displayResults(duration, delay);
</script>